<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORA! Data Lab - Pensioni</title>
    
    <!-- Google Fonts: Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- ORA! Stylesheet -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    
    <!-- 1. NAVIGATION -->
    <nav class="navbar">
        <div class="container">
            <a href="index.html">← Torna alla Home</a>
            <span style="margin-left: auto; opacity: 0.7;">ORA! Data Lab</span>
        </div>
    </nav>

    <!-- 2. HERO -->
    <header class="hero">
        <div class="container">
            <h1>Pensioni: La Verità dei Dati</h1>
            <p>Il sistema pensionistico italiano è spesso al centro del dibattito politico. <br>Ma quanto ne sai davvero? Scoprilo con i dati ufficiali ISTAT e RGS.</p>
        </div>
    </header>

    <!-- 3. QUIZ SECTION -->
    <section class="quiz-container" id="quizSection">
        <div class="container">
            <h2 class="section-title">Step 1: Sfida le tue Convinzioni</h2>
            <div id="quizProgress" style="text-align: center; font-weight: 600; margin-bottom: 10px;">Caricamento...</div>
            <div id="scoreDisplay" style="text-align: center; margin-bottom: 20px;"></div>
            
            <div id="quizContent"></div>

            <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px;">
                <button class="btn hidden" id="prevBtn" onclick="previousQuestion()">← Precedente</button>
                <button class="btn" id="nextBtn" onclick="nextQuestion()">Inizia Quiz</button>
                <button class="btn btn-secondary hidden" id="restartBtn" onclick="restartQuiz()">Ricomincia</button>
            </div>
        </div>
    </section>

    <!-- 4. SIMULATOR SECTION -->
    <section class="container section">
        <h2 class="section-title">Step 2: Simulatore di Sostenibilità</h2>
        <div class="card">
            <p style="text-align: center; margin-bottom: 30px;">
                Il sistema si regge su un equilibrio precario. <strong>Sposta i cursori</strong> per vedere come occupazione, produttività e demografia influenzano il futuro.
            </p>

            <!-- Sliders -->
            <div class="slider-container">
                <div class="slider-label"><span>Tasso di Occupazione</span><span id="employmentValue">61.5%</span></div>
                <input type="range" min="50" max="80" value="61.5" step="0.5" class="slider" id="employmentSlider">
                <small>Media UE: 70%. Se lavorano più persone, ci sono più contributi.</small>
            </div>

            <div class="slider-container">
                <div class="slider-label"><span>Produttività Annua</span><span id="productivityValue">0.5%</span></div>
                <input type="range" min="0" max="3" value="0.5" step="0.1" class="slider" id="productivitySlider">
                <small>Se il PIL cresce, il debito pesa meno.</small>
            </div>

            <div class="slider-container">
                <div class="slider-label"><span>Età Pensionamento</span><span id="retirementValue">67 anni</span></div>
                <input type="range" min="62" max="72" value="67" step="1" class="slider" id="retirementSlider">
                <small>Alzare l'età riduce la spesa, ma è socialmente sostenibile?</small>
            </div>

            <div class="slider-container">
                <div class="slider-label"><span>Tasso di Fertilità</span><span id="fertilityValue">1.24</span></div>
                <input type="range" min="1.0" max="2.1" value="1.24" step="0.01" class="slider" id="fertilitySlider">
                <small>Figli per donna. Necessario 2.1 per stabilità demografica.</small>
            </div>

            <!-- Dashboard Output -->
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="sustainabilityRatio">1.43</div>
                    <div class="metric-label">Lavoratori per Pensionato</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="spendingPct">16.2%</div>
                    <div class="metric-label">Spesa su PIL</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="systemHealth" style="color: red;">CRITICO</div>
                    <div class="metric-label">Stato Salute</div>
                </div>
            </div>

            <div class="sustainability-gauge">
                <canvas id="gaugeChart"></canvas>
            </div>
            
            <div style="text-align: center;">
                <button class="btn btn-secondary" onclick="resetSustainability()">Ripristina Valori</button>
            </div>
        </div>
    </section>

    <!-- 5. CHARTS SECTION -->
    <section class="container section">
        <h2 class="section-title">Step 3: Il Contesto (Dati Reali)</h2>
        
        <!-- Demographics -->
        <div class="card" style="margin-bottom: 40px;">
            <h3 style="text-align: center; margin-bottom: 20px;">L'Inverno Demografico (2024 vs 2070)</h3>
            <p style="text-align: center; margin-bottom: 20px;">Confronta la struttura della popolazione oggi e tra 50 anni.</p>
            
            <div class="pyramid-container">
                <div class="pyramid-chart">
                    <div style="text-align:center;"><span class="pyramid-title">2024</span></div>
                    <div style="height: 300px;">
                        <canvas id="pyramid2024"></canvas>
                    </div>
                </div>
                <div class="pyramid-chart">
                    <div style="text-align:center;"><span class="pyramid-title">2070</span></div>
                    <div style="height: 300px;">
                        <canvas id="pyramid2070"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Projections -->
        <div class="card">
            <h3 style="text-align: center; margin-bottom: 20px;">Proiezioni di Spesa (Scenari RGS)</h3>
            <p style="text-align: center; margin-bottom: 20px;">La "gobba" della spesa raggiungerà il picco nel 2045.</p>
            <div class="chart-container">
                <canvas id="projectionsChart"></canvas>
            </div>
        </div>
    </section>

    <!-- 6. FOOTER -->
    <footer class="footer">
        <div class="container">
            <p><strong>ORA! Data Lab</strong> - Beta Release v1.0</p>
            <p style="font-size: 0.9rem; margin-top: 10px; opacity: 0.8;">
                Dati elaborati da fonti ufficiali: ISTAT, Ragioneria Generale dello Stato, Eurostat.
            </p>
            <p style="font-size: 0.9rem; margin-top: 5px; opacity: 0.8;">
                &copy; 2025 ORA! Partito Politico.
            </p>
        </div>
    </footer>

    <!-- LOGIC -->
    <script src="js/pensioni.js"></script>
</body>
</html>